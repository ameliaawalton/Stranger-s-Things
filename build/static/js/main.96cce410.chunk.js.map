{"version":3,"sources":["api/index.js","components/App.js","components/AccountForm.js","index.js"],"names":["API_URL","BASE_URL","callApi","a","url","method","token","body","console","log","options","toUpperCase","headers","JSON","stringify","fetch","response","json","data","error","fetchUserData","App","useState","setToken","userData","setUserData","isLoggedIn","undefined","username","useEffect","localStorage","getItem","exact","path","onClick","removeItem","to","action","AccountForm","setUsername","password","setPassword","isLogin","title","oppositeAction","oppositeTitle","history","useHistory","handleSubmit","event","preventDefault","user","setItem","push","onSubmit","type","placeholder","required","value","onChange","target","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.96cce410.chunk.js","sourcesContent":["export const BASE_URL = 'https://strangers-things.herokuapp.com/api/';\nexport const COHORT_NAME = '2104-ECE-RM-WEB-PT/';\nexport const API_URL = BASE_URL + COHORT_NAME;\n\nexport const callApi = async ({ url, method, token, body }) => {\n    console.log('callApi: ', { url, method, token, body });\n\n    try {\n        const options = {\n            method: method ? method.toUpperCase() : 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(body),\n        };\n\n        if (token) {\n            options.headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        console.log('request URL: ', API_URL + url);\n        const response = await fetch(API_URL + url, options);\n        const data = await response.json();\n        console.log('data: ', data);\n\n        if (data.error) {\n            throw data.error;\n        }\n\n        return data;\n    } catch (error) {\n        console.error('ERROR: ', error);\n    }\n};","import React, { useEffect, useState } from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport { callApi } from '../api';\nimport { AccountForm } from '.';\n\nconst fetchUserData = async (token) => {\n    const { data } = await callApi({\n        url: '/users/me',\n        token,\n    });\n\n    return data;\n};\n\nconst App = () => {\n    const [token, setToken] = useState('');\n    const [userData, setUserData] = useState({});\n\n    const isLoggedIn = userData.username !== undefined;\n\n    const onLogOutClick = () => {\n        localStorage.removeItem('st-token');\n        setToken('');\n        setUserData({});\n    };\n\n    useEffect(async () => {\n        if (!token) {\n            setToken(localStorage.getItem('st-token'));\n            return;\n        }\n        const data = await fetchUserData(token);\n        setUserData(data);\n    }, [token]);\n\n    return (\n        <>\n            <h1>Stranger's Things</h1>\n            <Route exact path=\"/\">\n                {isLoggedIn ? (\n                    <>\n                        <div>Hello, {userData.username}</div>\n                        <button onClick={onLogOutClick}>Log Out</button>\n                    </>\n                ) : (\n                    <>\n                        <button>\n                            <Link to=\"/register\">Register</Link>\n                        </button>\n                        <button>\n                            <Link to=\"/login\">Login</Link>\n                        </button>\n                    </>\n                )}\n            </Route>\n            <Route path=\"/register\">\n                <AccountForm action=\"register\" setToken={setToken} />\n            </Route>\n            <Route path=\"/login\">\n                <AccountForm action=\"login\" setToken={setToken} />\n            </Route>\n        </>\n    );\n};\n\nexport default App;","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { callApi } from '../api';\n\nconst AccountForm = ({ action, setToken }) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const isLogin = action === 'login';\n    const title = isLogin ? 'Login' : 'Register';\n    const oppositeAction = isLogin ? 'register' : 'login';\n    const oppositeTitle = isLogin ? 'Register' : 'Login';\n    const history = useHistory();\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        const data = await callApi({\n            url: `users/${action}`,\n            body: { user: { username, password } },\n            method: 'POST',\n        });\n\n        const token = data.data.token;\n\n        if (token) {\n            localStorage.setItem('st-token', token);\n            setToken(token);\n            history.push('/');\n        }\n    };\n\n    return (\n        <>\n            <h2>{title}</h2>\n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"text\"\n                    placeholder=\"username\"\n                    required\n                    value={username}\n                    onChange={(event) => setUsername(event.target.value)}\n                ></input>\n                <input\n                    type=\"password\"\n                    placeholder=\"password\"\n                    value={password}\n                    onChange={(event) => setPassword(event.target.value)}\n                ></input>\n                <button type=\"submit\">{title}</button>\n            </form>\n            <button>\n                <Link to={`/${oppositeAction}`}>{oppositeTitle}</Link>\n            </button>\n            <button>\n                <Link to=\"/\">Home</Link>\n            </button>\n        </>\n    );\n};\n\nexport default AccountForm;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport { App } from './components';\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>,\n    document.querySelector('#app'),\n);"],"sourceRoot":""}